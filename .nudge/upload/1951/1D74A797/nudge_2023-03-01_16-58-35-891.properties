# Documentation paramètres Sonde PH Nudge Java : https://nudge-apm.com/config-probe-java_fr

### Paramètres applicatifs
# Application ID
app_id=89eea092-3893-4614-a412-9de464812a31
# app_id=c1cee4e3-aec7-4069-ac49-6251561d1f51

# Serveur de collecte PH Nudge (Modification 1)
server_url=http://localhost:8081/

# Liste des destinations des données collectées
# Différentes valeurs utilisables :
# - http: Envoie des données au collecteur PH Nudge spécifié par server_url ("http" est une valeur définie, la changer ne modifie pas le protocole)
# - file: Stockage des données en local dans le dossier de logs
handlers=http

# Rotation des fichiers de logs à garder
log_rotation_count=5

# Niveau de log, valeur par défaut SEVERE
# Différentes valeurs utilisables :
# - DEBUG : Log du debug
# - FINEST : Log le plus détaillé
# - FINE : Log détaillé
# - ERROR : Log des erreurs
# - SEVERE : Log des information graves
# - WARN : Log des warnings
# - INFO : Log les infos
log_level=DEBUG



### Paramètres techniques ***à modifier selon les besoins de dév***

# Emplacements du code devant faire l'objet de monitoring (comme pour les transactions), au format regex.
# Champs : <visibilité> <package> <methode> <nom de layer> <type>
# Exemple n°1 : * com.xyz.* * Service tx
# 	toutes les méthodes du package com.xyz sont instrumentées en tant que transaction de type Service
# Exemple n°2 : public org.slf4j.impl.Log4jLoggerAdapter * Log4j layer
# 	crée une couche "Log4j" depuis slf4j pour suivre les logs en tant que couche
#trace_classpath_regex=

# Copie les classes instrumentées avant et après instrumentation dans le répertoire de logs
dump_classes=true

# Copie l'ensemble des classes de l'application dans le répertoire de logs
#dump_all_classes=true

# Capture les adresses IP des clients en clair
http_client_ip=true

# Active l'injection je Javascript RUM dans les pages HTML produites par le serveur d'application
activate_rum=true

# Créée une transaction au démarrage de l'application afin d'approfondir le diagnostic
log_servlet_contextlistener=true

# Log la stackTrace lors de la connexion à une base SQL
log_connection=true


## Paramètres HTTP

# Active la capture des paramètres HTTP
# Note : Ce paramètre est forcément accompagné soit du paramètre ignored_params OU allowed_params
capture_params=true

# excluded_classpath=jdk.proxy2

# Liste des paramètres ignorés dans les appels HTTP
# Exemple : ignored_params=password,card_number
#ignored_params=

# Liste des paramètres autorisés dans les appels HTTP
# Exemple : allowed_params=login,action
allowed_params=*


## Headers HTTP

# Active la capture des headers HTTP
# Attention : Ce paramètre est forcément accompagné soit du paramètre ignored_headers OU allowed_headers
capture_headers=true

# Liste des headers ignorés dans les appels HTTP
# Exemple : ignored_headers=Authorization,Proxy-Authenticate
#ignored_headers=

# Liste des headers autorisés dans les appels HTTP
# Exemple : allowed_headers=Cookie,Accept
allowed_headers=*


## Profiling

# Active l'échantillonage du profiling
profiling_enable=true

# Profondeux maximale de capture des threads
# Note : une valeur basse minimise le poids des données de profilage, mais le profilage sera moins précis.
profiling_thread_depth=1000

# Intervale d'échantillonage du profiling, en millisecondes
# Note : Si vos transactions sont très rapides ou que vous avez seulement peu de transactions par jour,
# vous avez besoin d'une plus grande précision, ce qui se raduit par "plus d'échantillonage". Vous devriez alors baisser cette valeur.
profiling_sample_interval=1000

# Temps max alloué à l'échantillonage de profiling, en millisecondes
profiling_sample_max_time=10


## Dump des threads depuis le lancement de la JVM, au format .zip

# Fréquence de dump des threads
# Notes :
# - Mettre à 0 désactive le dump de thread,
# - Ce paramètre est forcément inférieur à thread_dump_duration
thread_dump_frequency=300

# Durée de dump des threads
# Notes :
# - Mettre à 0 désactive le dump de thread,
# - Ce paramètre est actif seulement lorsque thread_dump_frequency est supérieur à 0
# - Ce paramètre est forcément supérieur à thread_dump_frequency
thread_dump_duration=1800


# Préfixe le nom des transactions avec leur type
prepend_tx_type=true

# Ecrit en log la stackTrace d'une méthode instrumentée
instrumented_code_stracktraces=true



### Paramètres sensibles ***NE PAS MODIFIER***

# Active le suivi de Runnable, Threads et TimerTask
log_runnable=true


